<header class="sticky top-0 z-50 w-full border-b bg-blue-500/95 backdrop-blur shadow-sm text-white">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">

      <!-- Logo -->
      <div class="flex items-center gap-3">
        <a routerLink="/" class="flex items-center gap-3 hover:opacity-80">
          <div class="flex h-10 w-10 items-center justify-center rounded-lg bg-blue-900 text-white font-bold text-lg shadow-md">
            IF
          </div>
          <div class="hidden sm:block">
            <div class="text-lg font-bold text-gray-900">InsightFlow-360</div>
            <div class="text-xs text-gray-500">Real-time intelligence</div>
          </div>
        </a>
      </div>

      <!-- Desktop Search -->
      <div class="hidden md:flex flex-1 max-w-2xl mx-8 relative">

        <!-- <input
          type="search"
          [(ngModel)]="query"
          (input)="filterProducts()"
          (focus)="showSuggestions = true"
          (keydown.enter)="handleSearch()"
          placeholder="Search products, categories, vendors..."
          class="w-full rounded-full pl-4 pr-12 h-11 bg-gray-100 border focus:bg-white focus:ring-2 focus:ring-blue-300 transition text-black placeholder-white"
        />
        <button
          (click)="handleSearch()"
          class="absolute right-1 top-1 h-9 rounded-full px-4 bg-blue-600 text-white hover:bg-blue-700"
        >
          üîç
        </button> -->

        <!-- Suggestions -->
        <div
          *ngIf="showSuggestions && filtered.length > 0"
          class="absolute left-0 right-0 mt-2 bg-white border rounded-xl shadow-xl max-h-96 overflow-auto z-50 text-black"
        >
          <button
            *ngFor="let item of filtered"
            (click)="handleSuggestionClick(item)"
            class="w-full px-4 py-3 hover:bg-gray-100 flex items-center justify-between border-b last:border-0"
          >
            <div class="flex items-center gap-3 flex-1">
              <span class="text-2xl">{{ item.icon }}</span>
              <div>
                <div class="font-medium text-gray-900">{{ item.name }}</div>
                <div class="text-xs text-gray-500">{{ item.subtitle }}</div>
              </div>
            </div>
            <div class="text-sm font-semibold text-gray-900">{{ item.price }}</div>
          </button>
        </div>
      </div>

      <!-- Desktop Buttons -->
      <div class="hidden md:flex items-center gap-3">

        <!-- Profile Button -->
        <button class="flex items-center gap-2 border rounded-full px-4 py-2 hover:bg-gray-100"> 
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1112 21a9 9 0 01-6.879-3.196zM15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          Profile
        </button>

        <!-- Cart Button -->
        <button class="flex items-center gap-2 border rounded-full px-4 py-2 hover:bg-gray-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 7.5M7 13h10l1.5 7.5M16 13l1.5 7.5M9 21h6" />
          </svg>
          Cart
        </button>

        <!-- Orders Button -->
        <button 
          type="button"
          class="flex items-center justify-center gap-2 flex-1 border rounded-full py-2 px-4 hover:bg-gray-100 transition-colors"
        >
          <!-- Receipt Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2h6v2m-6-4v-2h6v2m-6-4V7h6v2M5 21h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z" />
          </svg>
          <span class="font-medium text-gray-700" [routerLink]="['/customer/orders']">Orders</span>
        </button>

        <!-- Notification Bell -->
        <!-- Notification Bell -->
<div class="relative">
  <i 
    class="pi pi-bell text-3xl cursor-pointer" 
    pBadge 
    [value]="unreadCount" 
    (click)="toggleNotifications()"
  ></i>

  <!-- Notifications Dropdown -->
  <div
    *ngIf="showNotifications"
    class="absolute right-0 mt-2 w-64 bg-white border rounded-xl shadow-lg z-50 text-black"
    (clickOutside)="closeNotifications()"
  >
    <!-- Header -->
    <div class="p-4 border-b font-semibold text-gray-800">
      Notifications
    </div>

    <!-- No notifications -->
    <div *ngIf="notifications.length === 0" class="p-4 text-gray-500">
      No new notifications
    </div>

    <!-- Notification Items -->
    <div *ngFor="let n of notifications" 
         class="p-3 hover:bg-gray-100 cursor-pointer flex justify-between items-center">
      <span>{{ n.message }}</span>
      <!-- Red dot if unread -->
      <span *ngIf="!n.read" class="w-2 h-2 bg-red-600 rounded-full"></span>
    </div>
  </div>
</div>


      </div>

      <!-- Mobile Menu -->
      <button
        class="md:hidden p-2 hover:bg-gray-100 rounded-lg"
        (click)="mobileMenuOpen = !mobileMenuOpen"
      >
        <span *ngIf="!mobileMenuOpen">‚ò∞</span>
        <span *ngIf="mobileMenuOpen">‚úñ</span>
      </button>

    </div>

    <!-- Mobile Menu Items -->
    <div *ngIf="mobileMenuOpen" class="md:hidden pb-4 space-y-4 animate-slide-up">

      <div class="relative">
        <input
          type="search"
          [(ngModel)]="query"
          (keydown.enter)="handleSearch()"
          placeholder="Search products..."
          class="w-full rounded-full pr-12 border px-4 py-2"
        />
        <button
          (click)="handleSearch()"
          class="absolute right-1 top-1 h-9 rounded-full bg-blue-600 text-white px-4"
        >
          üîç
        </button>
      </div>

      <div class="flex gap-2">

        <!-- Profile Button -->
        <button class="flex items-center justify-center gap-2 flex-1 border rounded-full py-2 px-4 hover:bg-gray-100">
          <!-- Profile Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A9 9 0 1112 21a9 9 0 01-6.879-3.196zM15 11a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
          Profile
        </button>

        <!-- Cart Button -->
        <button class="flex items-center justify-center gap-2 flex-1 border rounded-full py-2 px-4 hover:bg-gray-100">
          <!-- Cart Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.5 7.5M7 13h10l1.5 7.5M16 13l1.5 7.5M9 21h6" />
          </svg>
          Cart
        </button>

        <!-- Orders Button -->
        <button 
          type="button"
          class="flex items-center justify-center gap-2 flex-1 border rounded-full py-2 px-4 hover:bg-gray-100 transition-colors"
        >
          <!-- Receipt Icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2h6v2m-6-4v-2h6v2m-6-4V7h6v2M5 21h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z" />
          </svg>
          <span class="font-medium text-gray-700">Orders</span>
        </button>

        <!-- Notification Bell -->
        <i class="pi pi-bell text-3xl cursor-pointer" pBadge value="2"></i>

      </div>

    </div>
  </div>
</header>
