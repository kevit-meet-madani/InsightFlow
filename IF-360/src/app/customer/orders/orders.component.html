<app-customernavbar></app-customernavbar>
<div class="min-h-screen bg-gray-50 p-6">
  <div class="max-w-6xl mx-auto">

    <!-- Page Heading -->
    <h1 class="text-3xl font-bold text-gray-800 mb-8 text-center">
      My Orders
    </h1>

    <!-- ACTIVE ORDERS -->
    <div class="mb-12">
      <h2 class="text-2xl font-semibold text-[#1E3A8A] mb-4 flex items-center gap-2">
        <i class="pi pi-truck text-[#14B8A6]"></i>
        Active Orders
      </h2>

      <div *ngIf="activeOrders.length; else noActive">
        <div
          *ngFor="let order of activeOrders"
          class="bg-white rounded-2xl shadow-md mb-5 p-5 hover:shadow-lg transition"
        >
          <div class="flex flex-col md:flex-row items-center gap-5">
            <img
              [src]="order.productImage"
              alt="{{order.productName}}"
              class="w-24 h-24 rounded-xl object-cover"
            />
            <div class="flex-1">
              <h3 class="text-xl font-semibold text-gray-800">
                {{ order.productName }}
              </h3>
              <p class="text-gray-500 text-sm">Order ID: {{ order.id }}</p>
              <p class="text-gray-700 mt-1 font-medium">
                Amount: ₹{{ order.amount }}
              </p>
              <p class="mt-2 text-sm text-gray-500">
                Ordered on: {{ order.dateOrdered | date: 'mediumDate' }}
              </p>
            </div>

            <div class="text-center">
              <span
                class="px-4 py-1 rounded-full text-sm font-semibold"
                [ngClass]="getStatusColor(order.status)"
              >
                {{ order.status }}
              </span>
              <p class="text-xs text-gray-400 mt-2">
                Expected: {{ order.expectedDelivery | date: 'mediumDate' }}
              </p>
            </div>
          </div>

          <!-- Timeline -->
          
        <button (click)="showTrack()">Track Order</button>

        <div class="card" *ngIf="showtrack">
    <p-timeline [value]="events" align="alternate" styleClass="customized-timeline">
        <ng-template pTemplate="marker" let-event>
            <span 
                class="flex w-2rem h-2rem align-items-center justify-content-center text-white border-circle z-1 shadow-1" 
                [style]="{ 'background-color': event.color }">
                    <i [class]="event.icon"></i>
            </span>
        </ng-template>
        <ng-template pTemplate="content" let-event>
            <p-card [header]="event.status" [subheader]="event.date">
                <img 
                    *ngIf="event.image" 
                    [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + event.image"
                    [alt]="event.name"
                    width="200" 
                    class="shadow-2" />
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Inventore sed consequuntur error repudiandae numquam deserunt quisquam repellat libero asperiores earum nam nobis, culpa ratione quam perferendis esse, cupiditate
                    neque quas!
                </p>
                <p-button label="Read more" [text]="true" />
            </p-card>
        </ng-template>
    </p-timeline>
</div>
        </div>
      </div>

      <ng-template #noActive>
        <p class="text-gray-500 italic text-center mt-4">
          You have no active orders right now.
        </p>
      </ng-template>
    </div>

    <!-- ORDER HISTORY -->
    <div>
      <h2 class="text-2xl font-semibold text-[#1E3A8A] mb-4 flex items-center gap-2">
        <i class="pi pi-history text-[#14B8A6]"></i>
        Order History
      </h2>

      <div *ngIf="orderHistory.length; else noHistory">
        <div
          *ngFor="let order of orderHistory"
          class="bg-white rounded-2xl shadow-md mb-5 p-5 hover:shadow-lg transition"
        >
          <div class="flex flex-col md:flex-row items-center gap-5">
            <img
              [src]="order.productImage"
              alt="{{order.productName}}"
              class="w-24 h-24 rounded-xl object-cover"
            />
            <div class="flex-1">
              <h3 class="text-xl font-semibold text-gray-800">
                {{ order.productName }}
              </h3>
              <p class="text-gray-500 text-sm">Order ID: {{ order.id }}</p>
              <p class="text-gray-700 mt-1 font-medium">
                Amount: ₹{{ order.amount }}
              </p>
              <p class="mt-2 text-sm text-gray-500">
                Ordered on: {{ order.dateOrdered | date: 'mediumDate' }}
              </p>
            </div>

            <div class="text-center">
              <span
                class="px-4 py-1 rounded-full text-sm font-semibold"
                [ngClass]="getStatusColor(order.status)"
              >
                {{ order.status }}
              </span>
              <p class="text-xs text-gray-400 mt-2">
                Delivered on: {{ order.expectedDelivery | date: 'mediumDate' }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <ng-template #noHistory>
        <p class="text-gray-500 italic text-center mt-4">
          No previous orders found.
        </p>
      </ng-template>
    </div>
  </div>
</div>
<app-footer></app-footer>